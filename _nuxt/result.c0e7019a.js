import{u as b,q}from"./query.53b35fd3.js";import{u as j}from"./questionStore.51bea0a6.js";import{h as z,l as C,r as i,o as p,z as u,u as h,R as l,v as m,U as D,V as I,W as V,X as M,c as O,S as e,Y as x,Z as A,$ as F,a0 as L,y as Q}from"./entry.8a2e67bc.js";import"./utils.6f5140f3.js";import"./preview.496a16a7.js";const B=y=>(F("data-v-a0c0dcb7"),y=y(),L(),y),U={class:"ma-8"},W={key:0},X={key:1},Y=B(()=>e("h1",{class:"text-primary"},"Ergebnis",-1)),Z={class:"d-flex align-center w-100",style:{gap:"3em"}},$={class:"circled text-primary"},G={class:"w-100 d-flex justify-space-between align-center w-100"},H={class:"mr-10"},J=B(()=>e("div",{class:"w-100 pa-3 d-flex flex-row-reverse"},[e("span",null,"Soll"),e("span",{class:"mr-4"},"Ist")],-1)),K={class:"w-100 d-flex align-center justify-space-between"},ee={style:{"max-width":"90%"}},te=z({__name:"result",setup(y){const w=j(),{data:N,pending:R}=b("tools-result",()=>q("/tools").findOne()),{data:k,pending:E}=b("criteria-result",()=>q("/criteria").findOne()),S=C(()=>R.value||E.value),P=C(()=>{const f=[];return S.value||!w.done||(N.value.body.forEach(n=>{const o=new Map,c=new Map;let r=0,v=!0;for(const a in n.rating){const t=n.rating[a],d=w.answers.find(_=>_.criteriaSlug===a).answer;if((t==null?void 0:t.length)>0){console.log(n.slug,a);let _=!0;for(const s of d)console.log(s,t),o.set(a,2),t.includes(s)||(_=!1);_?(c.set(a,!0),r++):v=!1}else o.set(a,d),c.set(a,t>0),d===0||d===1&&t>0?r++:d===2&&(t>0?r++:v=!1)}f.push({tool:n,points:r,accepted:v,isRequested:o,isProvided:c})}),f.sort((n,o)=>{const c=o.points-n.points;if(c==0){if(n.accepted==o.accepted)return 0;if(!n.accepted)return 1;if(!o.accepted)return-1}return c})),f});return(f,n)=>{const o=i("v-btn"),c=i("v-expansion-panel-title"),r=i("v-icon"),v=i("v-divider"),a=i("v-list"),t=i("v-expansion-panel-text"),d=i("v-expansion-panel"),_=i("v-expansion-panels");return p(),u("div",U,[h(w).done?h(S)?M("",!0):(p(),u("div",X,[Y,l(_,{class:"mt-3"},{default:m(()=>[(p(!0),u(I,null,V(h(P),(s,T)=>(p(),O(d,{key:s.tool.slug},{default:m(()=>[l(c,null,{default:m(()=>[e("div",Z,[e("span",$,x(T+1),1),e("div",G,[e("h3",{class:A(s.accepted?"":"invalid")},x(s.tool.name),3),e("span",H,x(s.points)+" / "+x(h(k).body.length)+" Punkte",1)])])]),_:2},1024),l(t,null,{default:m(()=>[l(a,{class:"w-100"},{default:m(()=>[J,(p(!0),u(I,null,V(h(k).body,g=>(p(),u("div",{class:"w-100 pa-3",key:g.slug},[e("div",K,[e("span",ee,x(g.name),1),e("div",null,[l(r,{icon:s.isProvided.get(g.slug)?"mdi-check-circle-outline":"mdi-circle-outline",class:"mr-4"},null,8,["icon"]),l(r,{color:s.isRequested.get(g.slug)===2?"primary":void 0,icon:s.isRequested.get(g.slug)>0?"mdi-check-circle-outline":"mdi-circle-outline"},null,8,["color","icon"])])]),l(v)]))),128))]),_:2},1024)]),_:2},1024)]),_:2},1024))),128))]),_:1})])):(p(),u("div",W,[l(o,{color:"primary",to:"/threathelper",block:""},{default:m(()=>[D("Starte Test")]),_:1})]))])}}});const ie=Q(te,[["__scopeId","data-v-a0c0dcb7"]]);export{ie as default};
